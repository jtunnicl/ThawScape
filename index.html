<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ThawScape: ThawScape</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ThawScape
   </div>
   <div id="projectbrief">ThawScape is an experimental code to simulate the influence of thermokarst dynamics upon ice-cored terrain</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ThawScape </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>ThawScape is experimental code to simulate the influence of thermokarst dynamics upon ice-cored terrain. The code uses some well-established landscape evolution algorithms (cf. Pelletier, 2008) to simulate water and sediment flux over a landscape that is underlain by many (10-100s) meters of ground ice (sediment/ice ~= 15/85). As the cover soil layer is eroded to expose the ice, melt proceeds according to sun conditions and precipitation. Meltwater contributes to the overland and channelized flow component. If the thermokarst is covered in sediment, the melt/ablation process will cease until the ice is exposed again.</p>
<p>Sediment transport occurs both by hillslope diffusion ('D') and advective channel transport ('K'). Uplift ('U') is included, to maintain erosive potential, particularly over long timescales. Diffusive transport is higher within saturated sediment that runs off from melting thermokarst erosion sites. The ice melt rate ('melt') is calibrated to observed rates of thermokarst retreat, and requires some further experimentation to link values to physical (field) variables. A vegetation layer has been included to modify the erosion threshold and diffusion rate; vegetation will gradually re-establish after 3 years of no erosion activity.</p>
<p>Input requirements are (1) an ascii, arc-type DEM (e.g. topo.asc) with 6-line header indicating row and columns, lower left corner, cell resolution, and NoData values. (2) a flow accumulation raster (e.g. FA.asc), built with a multi-flow direction (MFD) algorithm. The code uses the boundary elements of this raster to determine flow contributions from outside the model domain. (3) Finally, an input file (e.g. ThawScape.ini) is used to specify model parameters.</p>
<p>Output is written as a sequence of ascii rasters that can be read with any GIS package.</p>
<h2>Building and Running ThawScape</h2>
<p>ThawScape uses the CMake build system and requires a C++11 compiler.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;mkdir build &amp;&amp; cd build     # create a build directory and switch to it</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cmake ..                    # run CMake to configure the build</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;make                        # build the code</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;ctest                       # run the tests</div></div><!-- fragment --><p>After the build has completed there should be a <em>ThawScape</em> executable in the build directory.</p>
<p>The <code>ThawScape.ini</code> input file must be present in the directory you run the executable from.</p>
<p>The default is to build a double precision version of ThawScape. If you would like to use single precision then add the option <code>-DDOUBLE_PRECISION=OFF</code>.</p>
<h2>Code layout</h2>
<p>The code is driven from <em><a class="el" href="main_8cpp.html">main.cpp</a></em>, which creates a <code><a class="el" href="classStreamPower.html">StreamPower</a></code> object (from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>):</p>
<ul>
<li>Inputs are loaded and components initialised during <code><a class="el" href="classStreamPower.html#adf501c73786da3a9ad49b7c6b4eaab5c">StreamPower::Init()</a></code><ul>
<li><a class="el" href="classParameters.html" title="Class for loading and accessing the parameters. ">Parameters</a> are loaded from the input file, <em>ThawScape.ini</em> (<code><a class="el" href="classParameters.html" title="Class for loading and accessing the parameters. ">Parameters()</a></code> from <em><a class="el" href="parameters_8cpp.html">parameters.cpp</a></em>)</li>
<li>DEM / <code>topo</code> <a class="el" href="classRaster.html" title="Class for storing a Raster array including methods for loading, saving and sorting. ">Raster</a> is loaded (<code><a class="el" href="classStreamPower.html#aac7dffa9bff0e2a7bf706038b7d3b0b4">StreamPower::SetTopo()</a></code> from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>)</li>
<li>Flow accumulation / <code>flow</code> <a class="el" href="classRaster.html" title="Class for storing a Raster array including methods for loading, saving and sorting. ">Raster</a> is loaded (<code><a class="el" href="classStreamPower.html#a5a526653afab2fba82ed4a16aaebabcc">StreamPower::SetFA()</a></code> from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>)</li>
<li>Most components need to be initialised with some combination of the DEM and flow <code><a class="el" href="classRaster.html" title="Class for storing a Raster array including methods for loading, saving and sorting. ">Raster</a></code>s and <code><a class="el" href="classParameters.html" title="Class for loading and accessing the parameters. ">Parameters</a></code> object before they can be used</li>
<li>Diffusion is initialised (<code><a class="el" href="classStreamPower.html#ac58f3fc919ef9f1d3e57b468c3cf85f2">StreamPower::InitDiffusion()</a></code> from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>)</li>
</ul>
</li>
<li>The main simulation loop occurs during <code><a class="el" href="classStreamPower.html#a8c0aad1b001389438fbab2f18dff2a6e">StreamPower::Start()</a></code></li>
</ul>
<p>The components are mainly split into their own files/classes as discussed below:</p>
<ul>
<li>Radiation model (<code><a class="el" href="classRadiationModel.html" title="RadiationModel class for carrying out calculations associated with melt. ">RadiationModel</a></code> from <em><a class="el" href="radiation__model_8cpp.html">radiation_model.cpp</a></em>)<ol type="1">
<li>Compute slope and aspect of the DEM, required for radiation model calculations (<code><a class="el" href="classRaster.html#a6ecbb38a721f83e781a952b6e15f9877" title="Compute the slope and aspect of the DEM. ">Raster::compute_slope_and_aspect()</a></code> from <em><a class="el" href="raster_8cpp.html">raster.cpp</a></em>)</li>
<li>Update solar characteristics (<code><a class="el" href="classRadiationModel.html#abfb81afa9f6c8f30cb0c94a49256babf" title="Update solar characteristics. ">RadiationModel::update_solar_characteristics()</a></code> from <em><a class="el" href="radiation__model_8cpp.html">radiation_model.cpp</a></em>)<ol type="a">
<li>Update sun position (<code><a class="el" href="classSolarGeometry.html#a0b37fcacedf7fa6180ecc1e640e6199d" title="Compute the sun position. ">SolarGeometry::sun_position()</a></code> from <em><a class="el" href="solar__geometry_8cpp.html">solar_geometry.cpp</a></em>)</li>
<li>Compute solar influx (<code><a class="el" href="classRadiationModel.html#a3c9f72a499701980e7e86bc443ab1831" title="Compute solar influx. ">RadiationModel::solar_influx</a></code> from <em><a class="el" href="radiation__model_8cpp.html">radiation_model.cpp</a></em>)</li>
</ol>
</li>
<li>Compute melt potential (<code><a class="el" href="classRadiationModel.html#ad60846df1d5d8df0bf3aae08af149b7b" title="Compute incoming watts to be applied later. ">RadiationModel::melt_potential()</a></code> from <em><a class="el" href="radiation__model_8cpp.html">radiation_model.cpp</a></em>)<ul>
<li><b>Note</b>: application of the melt potential occurs later during avalanching</li>
</ul>
</li>
</ol>
</li>
<li>Hydro processes<ol type="1">
<li><a class="el" href="classFlood.html">Flood</a> / fill in pits and flats in the DEM, required before sorting points by elevation (<code><a class="el" href="classFlood.html#a020c412ff48e6c8aa7e9d3c767fc107d" title="Run the algorithm. ">Flood::run()</a></code> from <em><a class="el" href="flood_8cpp.html">flood.cpp</a></em>)</li>
<li>Sort points in the elevation model by height, required as flow routing must proceed from high to low (<code><a class="el" href="classRaster.html#a94d3c0b8608f1e84387fb3de6d2586f2" title="Create a list of indexes of the data sorted by value (low to high) ">Raster::sort_data()</a></code> from <em><a class="el" href="raster_8cpp.html">raster.cpp</a></em>)</li>
<li>Calculate flow routing / flow accumulation (<code><a class="el" href="classMFDFlowRouter.html#afca651b45883c7d0ba06b010e5f0c148" title="Do the flow routing. ">MFDFlowRouter::run()</a></code> from <em><a class="el" href="mfd__flow__router_8cpp.html">mfd_flow_router.cpp</a></em>)</li>
<li>Compute slope and aspect of the DEM, required for channel erosion (<code><a class="el" href="classRaster.html#a6ecbb38a721f83e781a952b6e15f9877" title="Compute the slope and aspect of the DEM. ">Raster::compute_slope_and_aspect()</a></code> from <em><a class="el" href="raster_8cpp.html">raster.cpp</a></em>)</li>
<li>Compute channel erosion based on flow accumulation (<code><a class="el" href="classStreamPower.html#a0c90c3056b42f5f0d2290602addcb62e">StreamPower::channel_erosion()</a></code> from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>)</li>
</ol>
</li>
<li>Erosion<ol type="1">
<li><a class="el" href="classFlood.html">Flood</a> / fill in pits and flats in the DEM, required before sorting points by elevation (<code><a class="el" href="classFlood.html#a020c412ff48e6c8aa7e9d3c767fc107d" title="Run the algorithm. ">Flood::run()</a></code> from <em><a class="el" href="flood_8cpp.html">flood.cpp</a></em>)</li>
<li>Sort points in the elevation model by height, required as avalanching must proceed from low to high (<code><a class="el" href="classRaster.html#a94d3c0b8608f1e84387fb3de6d2586f2" title="Create a list of indexes of the data sorted by value (low to high) ">Raster::sort_data()</a></code> from <em>Raster.cpp</em>)</li>
<li>Landsliding / avalanching (<code><a class="el" href="classAvalanche.html#a649022ae3feeee7689832e66371565d0" title="Run the avalanche code. ">Avalanche::run()</a></code> from <em><a class="el" href="avalanche_8cpp.html">avalanche.cpp</a></em>)<ul>
<li><b>Note</b>: The melt potential, computed earlier, is applied during this routine</li>
</ul>
</li>
<li>Diffusive hill slope erosion (<code>HillslopeDiffusion::run()</code> from <em><a class="el" href="hillslope__diffusion_8cpp.html">hillslope_diffusion.cpp</a></em>)</li>
</ol>
</li>
<li>Apply uplift (<code><a class="el" href="classStreamPower.html#a61bd71492cb22abd7590321f0328dfca">StreamPower::uplift()</a></code> from <em><a class="el" href="streampower_8cpp.html">streampower.cpp</a></em>)</li>
</ul>
<p>More developer documentation here: <a href="https://jtunnicl.github.io/ThawScape">https://jtunnicl.github.io/ThawScape</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
